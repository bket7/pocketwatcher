# Pocketwatcher Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# REQUIRED: Chainstack Yellowstone gRPC
# =============================================================================
# Get from: https://console.chainstack.com/
YELLOWSTONE_ENDPOINT=your-yellowstone-endpoint.chainstack.com:443
YELLOWSTONE_TOKEN=your-chainstack-token

# =============================================================================
# REQUIRED: PostgreSQL Database
# =============================================================================
# Local: postgresql://user:password@localhost:5432/pocketwatcher
# Or use a managed service like Supabase, Neon, etc.
POSTGRES_URL=postgresql://user:password@localhost:5432/pocketwatcher

# =============================================================================
# REQUIRED: Helius API
# =============================================================================
# Get from: https://www.helius.dev/
HELIUS_API_KEY=your-helius-api-key

# Optional: Override RPC URL (defaults to mainnet with API key)
# HELIUS_RPC_URL=https://mainnet.helius-rpc.com/?api-key=your-key

# Daily credit budget (~10M/month divided by 30)
HELIUS_DAILY_CREDIT_LIMIT=300000

# =============================================================================
# OPTIONAL: Redis (defaults to localhost)
# =============================================================================
# Default: redis://localhost:6379/0
REDIS_URL=redis://localhost:6379/0

# Max messages in ingest buffer
REDIS_STREAM_MAXLEN=100000

# =============================================================================
# OPTIONAL: Discord Alerts
# =============================================================================
# Create webhook in Discord channel settings -> Integrations -> Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# =============================================================================
# OPTIONAL: Telegram Alerts
# =============================================================================
# Create bot via @BotFather, get chat_id via @userinfobot
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=-1001234567890

# =============================================================================
# TUNING: Detection Thresholds
# =============================================================================
# Signature dedup TTL (seconds)
DEDUP_TTL_SECONDS=600

# TxDeltaRecord retention for backfill (minutes)
DELTA_LOG_RETENTION_MINUTES=60

# Minimum confidence for SwapEventFull
MIN_SWAP_CONFIDENCE=0.7

# =============================================================================
# TUNING: Backpressure Thresholds
# =============================================================================
# Seconds of processing lag before DEGRADED mode
DEGRADED_LAG_SECONDS=5

# Seconds of processing lag before CRITICAL mode
CRITICAL_LAG_SECONDS=30

# Stream length before DEGRADED mode
DEGRADED_STREAM_LEN=50000

# Stream length before CRITICAL mode
CRITICAL_STREAM_LEN=80000
